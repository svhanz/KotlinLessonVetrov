## Конкатенация строк
[https://www.youtube.com/watch?time_continue=62&v=2oIJSVBcXE0&feature=emb_logo](https://www.youtube.com/watch?time_continue=62&v=2oIJSVBcXE0&feature=emb_logo)
Обсудим возможности строк в Котлине.<br> 
Представим, что мы программируем бота, который будет приветствовать новых пользователей по имени<br>
и сообщать какую-нибудь информацию.<br> 
Для этого распечатаем такую строку:<br>
`println("Какой будет ваш главный вопрос?`<br>
Задача добавить к исходной строке приветствие.<br> 
Самое простое, что можно сделать со строками – это складывать их между собой.<br> 
Еще это называется конкатенация строк.<br> 
Складывать строки можно с помощью знака ‘+’.

Введем дополнительные переменные.<br>
Строку с приветствием и переменную, в которой будем хранить короткую строку – просто пробел.<br>
Так как пробел – это всего лишь один символ, сделаем переменную типа `Char`,
проинициализировав ее значение в одинарных кавычках.

Соберем строку как конструктор, связывая элементы между собой знаками `+`.<br> 
Вот так будет выглядеть сложение строковых литералов (литерал – простыми словами это значение,
которое напрямую объявили в коде).<br> 
То есть вот так будет выглядеть сложение нескольких строк (или конкатенация):
```
val greetings = "Здравствуйте"
val space = ' '
println(greeting + "!" + space + "Какой будет ваш главный вопрос?")
```
Отлично, мы получили строку с приветствием.<br> 
Расширим функционал, добавим обращение по имени.<br> 
Подразумевается, что имя пользователя всегда будет разное, поэтому вынесем его в отдельную переменную:<br>
`val userName = "Звездный Лорд"`

Теперь внедрим обращение в сообщение.<br> 
Это один из работающих, но не общепринятых способов – складывать литерал и 
переменную с помощью знака плюс:<br>
`println(greetings + ", " + userName + "!" + space + "Какой" + space + "будет ваш главный вопрос?")`

## Строковые шаблоны (интерполяция строк)
Теперь смотрите, нагромождение кавычек и операторов сложения сложно читается и повышает риск совершить ошибку.<br>
И Kotlin позволяет изящно реализовать отображение значения переменной прямо в единой строке,
используя строковые шаблоны (или шаблонные строки).<br>
По-другому эта функция языка называется интерполяция строк.

Фокус в том, что мы пишем требуемый текст и вставляем переменную прямо в строку без дополнительных знаков сложения.<br>
А чтобы переменная `userName` не была просто текстом, а стала носителем и передатчиком значения,
необходимо добавить знак `$` перед переменной.<br>
Теперь она выделена цветом для дополнительной наглядности и кликабельна.

При запуске интерпретатор увидит в строковом литерале переменную и подставит туда значение.<br>
Переменная space нам больше не нужна, ведь это грубо говоря теперь одна непрерывная строка с естественными пробелами.<br>
Такой шаблон строки можно создавать с любыми типами, в том числе с выражениями, с методами, логическими ветвлениями
if else и так далее:<br>
`println("$greetings, $userName! Какой будет ваш главный вопрос?")`

Но, чтобы сделать строковый шаблон с неким выражением, там, где просто переменной недостаточно,
это выражение нужно поместить в фигурные скобки.<br>
И перед скобками точно также ставим знак `$`, чтобы это больше не было обычной строкой.<br>
Теперь при запуске метода вывода в консоль, выражение в фигурных скобках
сначала выполнится, а затем на его месте в строке будет выведен результат:<br>
`println("На который можно ответить ${40 + 2}")`<br>
Вывод в консоль:<br>
`На который можно ответить 42`

## Многострочное интерполирование в Kotlin
Еще одна из отличительных возможностей языка – удобная запись многострочного текста.<br> 
За многострочный текст в Котлине отвечает оператор тройные кавычки.<br> 
Объявим переменную и начнем инициализировать ее в виде многострочной строки в тройных кавычках.<br> 
Смотрите, среда разработки автоматически добавила вызов функции `trimIndent()`, применимую к нашей строке.<br> 
Эта функция проводит дополнительную оптимизацию – обнаруживает общий минимальный отступ (слева) у всех строк и 
удаляет его из каждой строки.<br>
Вот пример:<br>
Проинициализируем переменную такой многострочной записью.<br> 
Добавим рандомные отступы слева.<br> 
Выведем значение переменной в консоль.
```
val multiString = """
строка 1
строка 2
строка 3
""".trimIndent()
println(multiString)
```
Как мы видим, из трех строк минимальный отступ слева оказался у второй – он и был вырезан во всех строках:
```
строка 1
строка 2
строка 3
```
Для явной демонстрации зачем нужна эта функция – удалим ее и перезапустим программу.<br> 
Все оригинальные отступы сохранены.
```
val multiString = """
строка 1
строка 2
строка 3
"""
println(multiString)
Вывод в консоль:
строка 1
строка 2
строка 3
```
Но можно отобразить вывод еще изящнее. Мы можем все строки с разными отступами приравнять к левому краю одинаково.<br>
Для этого надо изменить функцию для нашей строки на `trimMargin()` и 
добавить символы вертикальной черты в начале каждой строки.<br> 
И получим ровный отформатированный текст:
```
val multiString = """
|строка 1
|строка 2
|строка 3
""".trimMargin()
println(multiString)
Вывод в консоль:
строка 1
строка 2
строка 3
```
Где это может применяться?<br> 
Например, если мы хотим написать целую функцию, используя многострочное интерполирование.<br>
А, как правило, если логика выглядит чуть сложнее, чем обычный текст, следует писать ее с соблюдением отступов
для ее функциональности, читабельности и вообще красоты.

## Примечание:
Вариант записи `" "` называется снятой строкой, а `""" """` – исходной<br>
Соответственно, при записи через `" "` строка как бы снимается с той строки,
которая была введена и все экранированные символы заменяются на соответствующие текстовые символы.<br>
В то же время запись `""" """` не использует экранированных символов, а считывает текст таким, какой он есть.<br>
При такой записи сразу используются текстовые символы, поэтому вместо `\n` можно просто переходить на новую строку,
а вместо `\t` ставить табуляцию.

## Тест по уроку
Вопрос 1:<br>
Какой вариант ввода многострочного текста в переменную типа String не сработает?<br> 
То есть в каком случае текст запишется в одну строку.<br>
\n – это символ переноса строки
1️⃣  
val str = "a" +
"b" +
"c" +
"d"
2️⃣  
val str = "a\n" +
"b\n" +
"c\n" +
"d"
3️⃣   
val str = """
a
b
c
d
"""
4️⃣
val str = "a\nb\nc\nd"
Ответ:
Все варианты ввода, кроме 1 работают.
Во 2 все строки сначала сложатся в одну и получится такая же строка как и в 4,
а затем \n будет заменен на перенос строки.
В 3 текст будет считан так, как он записан, то есть с учетом переноса строк.
В 1 нет переносов строк, то есть все символы запишутся в одну строку.
====
Вопрос 2
Как убрать лишние пробелы (но с сохранением отступов) в начале строк при объявлении через """ """?
То есть чтобы:  
"""
           a
         b
             c
               d
"""

Выводило так:  
  a
b
    c
      d

А не так:  
            a
          b
               c
                 d
1️⃣ val str = """ """.trimIndent()
2️⃣ val str = """ """.trimMargin()
3️⃣ val str = """ """.trim()
4️⃣ val str = """ """.removePrefix(" ")
Ответ 1:
trimIndent() берет минимальный отступ из всех строк и убирает его во всех строках.
trimMargin() убирает все пробелы в начале каждой строки, поэтому он просто выровняет весь текст по левому краю,
что не всегда надо.
trim() убирает пробелы в начале и конце всего текста.
removePrefix() убирает префикс в начале текста.
====
Вопрос 3
В чем разница между:
1. `"$..."`
2. `"${...}"`
1️⃣ Никакой
2️⃣ 1 может принимать в себя только переменную, а 2 еще и выражение
3️⃣ 1 может принимать в себя только переменную, а 2 только выражение
4️⃣ 2 может принимать в себя только переменную, а 1 еще и выражение
Ответ 2:
Если попробовать написать так:  
`val str = "abc"`
а затем вывести:  
`print("$str.length")`
то в консоль выведется сообщение
`abc.length`
В то время как, если вывести:   
`print("${str.length}")`
то выведется 3
`$`... выводит только значение самой переменной, все что идет после имени переменной считается частью шаблона
`${...}` выводит все что записано в фигурных скобках
====
Вопрос 4
Что такое конкатенация?
1️⃣ Многострочное объявление
2️⃣ Сравнение строк
3️⃣ Сложение строк
4️⃣ Синоним интерполяции
Ответ 3:
Конкатенация – сложение строк вида `"str1" + "str2"`
====
Вопрос 5
В чем самая главная разница между записями строки через `" "` и `""" """`?
1️⃣ Запись через `" "` не позволяет вводить многострочный текст, а `""" """` позволяет
2️⃣ `" "` использует экранированные символы по типу `'\n'`, `'\t'`, а `""" """` использует соответствующие
текстовые аналоги, как `' '`
3️⃣ `" "` записывает исходный текст, так как он и записан в строке, а `""" """` записывает текст
с учетом экранированных символов
4️⃣ Разницы нет
Ответ 2
Вариант записи `" "` называется снятой строкой, а `""" """` – исходной
Соответственно, при записи через `" "` строка как бы снимается с той строки,
которая была введена и все экранированные символы заменяются на соответствующие текстовые символы.
В то же время запись `""" """` не использует экранированных символов, а считывает текст таким, какой он есть.
При такой записи сразу используются текстовые символы, поэтому вместо `\n` можно просто переходить на новую строку,
а вместо `\t` ставить табуляцию.
====
Вопрос 6
Можно ли в Kotlin складывать число и строку?
1️⃣ Можно
2️⃣ Нельзя
3️⃣ Можно, но для этого число должно быть первым слагаемым
4️⃣ Можно, но для этого число должно быть вторым и более слагаемым
Ответ 4:
В Kotlin можно прибавлять только число к строке, то есть, если число стоит после строки.
Это связано с тем, что оператор сложения `+` при запуске программы заменяется на функцию `.plus(_переменная_)`. 
У строк есть функция `.plus(_число_)`, а у чисел нет функции `.plus(_строка_)`.
====
Вопрос 7
В каком случае строки str1 и str2 будут равны по содержанию?   
Если val a = 5
\n – символ переноса строки
1️⃣   
val str1 = "a\nb\nc\nd"
str1 += a
val str2 = """
a
b
c
d
$a
"""
2️⃣   
val str1 = "a\nb\nc\nd"
str1 += a
val str2 = """
a
b
c
d
$a
""".trimIndent()
3️⃣   
val str1 = "a\nb\nc\nd"
str1 += a
val str2 = """
a
b
c
d$a
""".trimIndent()
4️⃣   
val str1 = "a\nb\nc\nd"
str1 += a
val str2 = """
a
b
c
d$a
"""
Ответ 3:
Изначально в переменной `str1` будет строка:
a
b
c
d
затем, так как переноса на новую строку не было, в конец последней строки добавится значение переменной `a`,
и получится строка:
a
b
c
d5
В переменной `str2` будет такая же строка, если записать `$a` после символа `d`,
а не на новой строке и убрать лишние пробелы функцией `.trimIndent()`
====
Вопрос 8
Какой вариант объявления переменной типа String неправильный?
val a = 5
1️⃣ val str = "${a}abcd"
2️⃣ val str = a + "abcd"
3️⃣ val str = """abcd$a"""
4️⃣ val str = "ab" + a + "cd"
Ответ 2:
Для того, чтобы успешно сложить число со строкой в Kotlin нужно, чтобы строка была на первом месте при сложении.
Если же нужно чтобы число было в начале получившейся строки, то можно записать `val str = "" + a + "abcd"`,
но лучшим решением будет записать `val str = "${a}abcd"`, при этом запись `val str = "$aabcd"` не сработает,
так как Kotlin будет считать `aabcd` как название переменной.
====
Вопрос 9
Какой вариант прибавления к строке str1 строки str2 неправильный, 
если результат сложения нам надо сохранить в переменной str1?
var str1 = "abcd"
val str2 = "efgh"
1️⃣ str1 + str2
2️⃣ str1 = str1 + str2
3️⃣ str1 += str2
4️⃣ str1 = "$str1$str2"
Ответ 1:
Так как строки в Kotlin, как и во многих других языках программирования являются неизменяемыми,
результат сложения возвращает новую строку, которую надо присвоить в какую-то переменную.
====
Вопрос 10
Чему будет равна переменная str?
val str = "abcd"
str += str
1️⃣ abcdabcd
2️⃣ abcd+abcd
3️⃣ abcd
4️⃣ Код не будет выполнен
Ответ 4:
Переменные в Kotlin могут быть объявлены либо как изменяемые (mutable) с помощью ключевого слова var,
либо как неизменяемые (read-only) с помощью ключевого слова val соответственно.
Если бы переменная была объявлена через var, то строки бы сложились: abcdabcd