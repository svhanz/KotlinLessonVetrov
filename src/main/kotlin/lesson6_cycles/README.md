# УРОК 6: ЦИКЛЫ В KOTLIN. WHILE, DO-WHILE

---

## Что такое циклы?

Циклы позволяют многократно исполнять один и тот же код при определенных условиях.<br>
Во-первых, мы избегаем дублирования кода, что в принципе считается хорошим тоном.<br>
Во-вторых, количество итераций может быть бесконечно многим и повторять работу<br>
какого-либо компонента они должны, например, на протяжении всего жизненного цикла программы.<br>
В таких случаях не обойтись без конструкций для регулярного повторения исполнения кода.<br>
Я расскажу про несколько видов циклов: `while` и `do-while`.

Представим, что в нашем приложении перед открытием определенного экрана необходимо показать баннер с рекламой.<br>
А под баннером будет отображаться надпись – “Реклама закончится через 5, 4, 3… и так далее”.<br>
Экраном со счетчиком сегодня будет выступать наша консоль.

Продемонстрирую проблему: чтобы реализовать счетчик без циклов, необходимо 5 раз подряд вызвать сообщение, <br>
при этом каждый раз меняя строку с оставшимся временем:
```html
println("Реклама закончится через 5")
println("Реклама закончится через 4")
println("Реклама закончится через 3")
println("Реклама закончится через 2")
println("Реклама закончится через 1")
```
## Цикл while в Котлин

Громоздко и много повторений.<br>
Реализуем это более изящно с помощью цикла `while` и одной дополнительной переменной в качестве счетчика.<br>
Создаем изменяемую переменную с именем `counter` и проинициализируем ее числом, с которого хотим начать обратный отсчет – 5.<br>
Далее пишем ключевое слово `while`, а в круглых скобках условие `(counter > 0)` “Пока counter больше 0”.<br>
Далее пишем фигурные скобки – это тело цикла.<br>
Тот самый код, который будет исполняться, пока условие в круглых скобках является `true`.<br>
Мы будем изменять значение переменной, отнимая по единице каждую секунду и когда `counter` станет равным 0, <br>
условие вернет `false` и программа не зайдет внутрь цикла и не выполнит написанный код.

В теле цикла мы будем выводить наше информационное сообщение с помощью вызова `println()`, <br>
а в качестве значения счетчика подставим переменную `$counter`, используя интерполяцию строк:
```html
var counter = 5

while (counter > 0) {
		println("Реклама закончится через $counter")
}
```
Если сейчас запустить цикл, он будет бесконечно выполнять инструкцию, потому что `counter`<br>
никогда не станет 0. То же самое будет, если написать `while(true)`.<br>
Чтобы работа цикла закончилась через 5 итераций, нужно отнимать от счетчика единицу в каждой его итерации.<br>
Поэтому применим к переменной постфиксную операцию декремента.<br>
Мы разбирали их в теме по арифметическим операциям.<br>
Обратите внимание, что сейчас два минуса окрашены в серый цвет строки.<br>
Все потому, что теперь это стало выражением, а при применении шаблонных строк выражения <br>
необходимо дополнительно оборачивать в фигурные скобки, сохраняя знак доллара перед ними.<br>
Таким образом мы обозначили границы:
```html
var counter = 5

while (counter > 0) {
		println("Реклама закончится через ${counter--}")
}
```
Что теперь будет происходить в программе: объявленная переменная содержит число 5.<br>
На 5 строчке проверяется условие в круглых скобках – 5 больше 0 – это истина.<br>
Программа заходит в тело цикла и вызывает вывод в консоль сообщения.<br>
В `counter` по-прежнему остается 5 без изменений.<br>
Затем срабатывает операция декремента и от 5 отнимается единица.<br>
Далее программа упирается в конец тела цикла и заново возвращается проверять условие.<br>
В переменной `counter` уже 4 и это также `true`.<br>
Так повторяется, пока `counter` не станет 0 и при очередной проверке условия, оно вернет `false`.<br>
После чего программа не зайдет в тело цикла и не обнаружив дополнительных инструкций завершит свое выполнение.

Что теперь будет происходить в программе: объявленная переменная содержит число 5.<br>
На 5 строчке проверяется условие в круглых скобках – 5 больше 0 – это истина.<br>
Программа заходит в тело цикла и вызывает вывод в консоль сообщения.<br>
В `counter` по-прежнему остается 5 без изменений.<br>
Затем срабатывает операция декремента и от 5 отнимается единица.<br>
Далее программа упирается в конец тела цикла и заново возвращается проверять условие.<br>
В переменной `counter` уже 4 и это также `true`.<br>
Так повторяется, пока `counter` не станет 0 и при очередной проверке условия, оно вернет `false`.<br>
После чего программа не зайдет в тело цикла и не обнаружив дополнительных инструкций завершит свое выполнение:
```html
while (counter > 0) {
    println("Реклама закончится через ${--counter}")
}
```
Наш счетчик распечатал и 0 тоже, потому что на момент проверки условия там все еще была единица.<br>
Но это все еще не похоже на посекундный счетчик.<br>
Для правдоподобности добавим еще одну инструкцию в цикл, <br>
а именно после каждого сообщения будем ставить на паузу программу на 1 секунду.
```html
while (counter > 0) {
    println("Реклама закончится через ${counter--}")
    Thread.sleep(1000)
```
В общих словах.<br>
Запустив метод main(), мы запустили определенный процесс.<br>
В любом процессе присутствует поток для его выполнения.<br>
За поток отвечает класс `Thread` и внутри этого класса есть метод `sleep()`, который мы и вызвали.<br>
Он позволяет приостановить поток, в котором выполняется программа на определенное время.<br>
Время устанавливается в миллисекундах в качестве параметра, то есть записывается в круглые скобки.<br>
1000 миллисекунд – это 1 секунда.<br>
Запустим программу и убедимся, что паузы работают и сообщение ежесекундно обновляется.
---
## Цикл do-while

Великолепно. Посмотрим на еще один вид цикла do-while:
```html
do {
    println("${counter--}")
    Thread.sleep(1000)
} while (counter > 0)
```
Конструкция выглядит вот так.<br>
Скопируем данные из первого цикла и запустим.<br>
Поведение полностью идентичное, за исключением одного.<br>
Тело цикла `do-while` сначала выполнит один раз код внутри себя при любых обстоятельствах, <br>
а только потом будет проверять условие на `true` или `false` и определять надо ли входить в цикл еще раз.<br>
Даже если мы намеренно выставим `false` в проверке условия, цикл все равно сначала отработает одну итерацию.
```html
do {
    println("${counter--}")
    Thread.sleep(1000)
} while (false)
```
---
### Тест по уроку 6: Циклы while, do while   
Вопрос 1:<br>
Что такое циклы в Kotlin?   

1️⃣ Конструкции которые позволяют выполнять тот или иной код в зависимости от условия (ветвить код)

2️⃣ Конструкции которые позволяют создать диапазон

3️⃣ Конструкции которые позволяют многократно исполнять один и тот же код

4️⃣ Конструкции которые выполняют инструкции последовательно, друг за другом

Ответ: 3<br>
Циклы – это конструкции которые были придуманы для того, чтобы повторять исполнение куска кода многократно, отсюда и название.
---
Вопрос 2:<br>
Какой формат записи цикла while в Kotlin?

1️⃣ while { }

2️⃣ while (условие) { }

3️⃣ while условие:

4️⃣ when (условие) { }

Ответ: 2<br>
У цикла while в Kotlin формат while (условие) { тело_цикла }.
---
Вопрос 3:<br>
Какой вариант записи неверен?
```html
1️⃣  
while (1 == 1) print(1)

2️⃣  
while (1 == 1) {
print(1)
}

3️⃣  
while (true) { }

4️⃣  
while (1) {
print(1)
}
```

Ответ: 4<br>
В круглых скобках обязательно должно быть значение `Boolean`, <br>
тело цикла `while` будет выполняться до тех пор, пока условие не вернет `false`.
---
Вопрос 4<br>
Выберите альтернативное написание вот этого кода(чтобы код был написан по другому, но делал то же самое):
```html
var counter = 0
while (true) println(counter++)

1️⃣  
while (1 == 1) {
println(counter)
counter++
}

2️⃣  
while (true) println(++counter)

3️⃣  
while (1 != 2) {
println(counter)
}

4️⃣  
while (counter++) println(counter)
```
Ответ: 1<br>
В коде из условия используется постфиксная форма инкремента, которая сначала возвращает значение, <br>
а затем увеличивает его на единицу, поэтому подходит вариант номер 1.
---
Вопрос 5:<br>
Что делает функция `Thread.sleep()`?

1️⃣ Погружает компьютер в спящий режим

2️⃣ Ставит текущий поток на паузу

3️⃣ Создает новый поток

4️⃣ Запускает новый поток

Ответ: 2<br>
Функция Thread.sleep() ставит поток в котором она вызвана на паузу.<br>
Если ее вызвать в программе, то она ее приостановит на заданное количество миллисекунд.
---
Вопрос 6:<br>
Что выведет данный кусок кода?
```html
var counter = 0
while (counter &lt;= 5) print(++counter)
```
1️⃣ 12345

2️⃣ 01234

3️⃣ 123456

4️⃣ 012345

Ответ: 3<br>
Используется префиксная форма инкремента, так что значение будет сначала увеличиваться, а потом возвращаться.<br>
Начинается отсчет с 0, но так как значение сначала увеличится, то первой будет 1.<br>
Отсчет идет до 6, так как в условии стоит меньше или равно, то есть на последней итерации будет 5, <br>
затем переменная увеличится на 1 и выведется в консоль.
---
Вопрос 7:<br>
В чем разница между циклами while и do-while?

1️⃣ Цикл while сначала проверяет условие, а затем, если оно возвращает true, переходит в тело цикла, <br>
у do-while наоборот, сначала исполняет код в теле цикла, а потом проверяет условие

2️⃣ Разницы между ними нет, это две разные формы записи одного и того же цикла

3️⃣ Цикл while работает только с условиями, в то время как do-while может принимать еще и переменные

4️⃣ Цикл while работает только с условиями, в которых сравниваются числа и поэтому работает быстрее, <br>
а do-while с любыми условиями, но работает медленно

Ответ: 1<br>
Циклы while и do-while можно немного сравнить с постфиксной и префиксной формами инкремента и декремента.<br>
Оба делают одно и то же, но есть нюанс. <br>
Цикл while – это цикл с предусловием (то есть сначала проверяется условие, затем если условие верно, <br>
то выполняется код внутри тела), а цикл do-while – с постусловием (сначала выполняется код, а затем проверяется условие).
---
Вопрос 8:<br>
Какая из данных программ не соответствует таймеру в 10 секунд?
```html
var counter = 10

1️⃣  
while (counter &gt; 0) println(counter–)

2️⃣  
while (counter &gt; 0) {
println(counter--)
Thread.sleep(1000)
}

3️⃣  
do {
println(counter--)
Thread.sleep(1000)
} while (counter &gt; 0)

4️⃣  
while (counter &gt;= 1) {
println(counter)
counter--
Thread.sleep(1000)
}
```

Ответ: 1<br>
В 1-ом варианте ответа не прописан вызов функции Thread.sleep(), <br>
и программа сразу выведет все в консоль, а не с интервалом в 1 секунду.
---
Вопрос 9:<br>
Какая из данных программ “зациклится” (будет работать бесконечно, если ее принудительно не остановить)?
```html
var counter = 0

1️⃣ do print(counter++) while (false)

2️⃣ while (true == false) print(counter)

3️⃣ while (counter &lt; 5) print(counter)

4️⃣ do while(counter != 0)
```

Ответ: 3<br>
Вариант 3 зациклится потому, что там не будет меняться значение переменной counter и <br>,
следовательно, условие в цикле будет всегда возвращать true.
---
Вопрос 10:<br>
Можно ли использовать циклы while и do-while в качестве возвращающего результат выражения?<br>   
Например, записать `var result = while (...) { … }`

1️⃣ Да, можно оба цикла, значение вернется на последней итерации

2️⃣ Нет, нельзя ни один из циклов

3️⃣ Можно только цикл while, значение вернется на последней итерации

4️⃣ Можно только цикл do-while, значение вернется на последней итерации

Ответ: 2<br>
Ни один из данных циклов нельзя использовать, чтобы вернуть какое-либо значение из них.